@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}

<ul id="product-list"></ul>

@section Scripts
{
    <script>
        let url = "https://localhost:7023/products";
        let productsList = document.getElementById("product-list");
        
        fetch(url)
            .then(response => response.json())
            .then(data => showProducts(data))
            .catch(ex => {
                alert("Error!");
                console.error(ex);
            });
        
        function showProducts(products) {
            products.forEach(product => {
                let li = document.createElement("li");
                let text = `${product.name} (\$${product.price})`;
                li.appendChild(
                    document.createTextNode(text));
                productsList.appendChild(li);
            });
        }
    </script>
}
